# Circle.yml For stable.world
machine:
  python:
    version: 3.5.1

dependencies:
  pre:
    - sudo apt-get update
    - pip install --upgrade pip setuptools wheel
  override:
    - pyenv global 2.7.12
    - pip install -r test-requirements.txt
    - python setup.py develop

    - pyenv global 3.6.0
    - pip install -r test-requirements.txt
    - python setup.py develop

test:
  override:
    - pyenv global 2.7.12
    - py.test --junitxml $CIRCLE_TEST_REPORTS/py2.test.xml

    - pyenv global 3.6.0
    - py.test --junitxml $CIRCLE_TEST_REPORTS/py3.test.xml

  post:
    - bash -xe ./makeapp.sh
    - cp ./bin/stable.world $CIRCLE_ARTIFACTS
    - python setup.py sdist bdist_wheel
    - cp ./dist/* $CIRCLE_ARTIFACTS
